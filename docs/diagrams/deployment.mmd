%% Deployment diagram for FastFood (Mermaid)
%% Render with Mermaid preview or mermaid-cli

flowchart TB
  subgraph Development["Development Environment"]
    DevMobile["Mobile Dev\n(Expo CLI)"]
    DevWeb["Web Dev\n(Vite Dev Server)"]
    DevServer["Payment Server\n(Node.js/Express)"]
  end

  subgraph Clients["Client Applications"]
    MobileApp["Mobile App\n(React Native + Expo)\nPort: 8081"]
    WebApp["Web App\n(React + Vite)\nPort: 5173"]
  end

  subgraph Hosting["Production Hosting"]
    MobileStore["App Stores\n(iOS/Android)"]
    WebHosting["Web Hosting\n(Netlify/Vercel)"]
    ServerHosting["Server Hosting\n(Railway/Heroku)"]
  end

  subgraph CloudServices["Cloud Services"]
    direction TB
    Supabase["Supabase Platform\n• PostgreSQL Database\n• Authentication\n• REST API\n• Realtime\n• File Storage"]
    MoMo["MoMo Payment Gateway\n• Payment Processing\n• Webhook Callbacks"]
    CDN["CDN Services\n• Static Assets\n• Images"]
  end

  %% Development Connections
  DevMobile --> MobileApp
  DevWeb --> WebApp
  DevServer --> CloudServices

  %% Client to Hosting
  MobileApp -->|Build & Deploy| MobileStore
  WebApp -->|Build & Deploy| WebHosting
  DevServer -->|Deploy| ServerHosting

  %% Production Connections
  MobileStore -->|HTTPS/WSS| Supabase
  WebHosting -->|HTTPS/WSS| Supabase
  ServerHosting -->|HTTPS| Supabase
  
  MobileStore -->|Payment API| MoMo
  WebHosting -->|Payment API| MoMo
  ServerHosting -->|Webhook| MoMo

  MobileStore -->|Static Assets| CDN
  WebHosting -->|Static Assets| CDN

  classDef cloud fill:#f0f6ff,stroke:#6b8cff
  class Cloud cloud
  class Supabase,CDN,MoMo cloud

  %% Notes
  click Supabase "https://supabase.com" "Supabase"
  click MoMo "https://momo.vn" "MoMo" 
  
  %% Legend
  subgraph Legend
    A["HTTPS: REST API (port 443)"]
    B["WSS: WebSocket Realtime"]
  end
